- key: "hub.storage.type"
  title: "Storage Type"
  info: "Where should the database be hosted?"
  type: select
  default: internal
  options:
    - key: internal
      value: "Internal - Keep the database in the cluster"
    - key: external
      value: "External - Connect to a database outside the cluster"
  validations:
    - type: equality
      check_against: 'external'
      message: "You will be responsible for managing your own database."
      tone: "warning"

- key: "hub.storage.managed_pvc"
  title: "Manage the in-cluster volume for me?"
  info: "Nectar can manage PersistentVolumeClaim automatically."
  type: select
  default: true
  options:
    - key: true
      value: "Yes - Nectar provisions the PVC"
    - key: false
      value: "No - You provision the PVC"
  validations:
    - type: equality
      check_against: 'false'
      message: "You will be asked to locate the PVC in the next step."
      tone: "warning"

- key: "hub.storage.pvc_name"
  title: "Point to the the PersistentVolumeClaim you want to use"
  type: select
  options_source:
    type: kubernetes_resources
    query:
      kind: PersistentVolumeClaim

  validations:
    - type: res_exists
      check_against: 'false'
      message: "You will be responsible for managing the PVC over time."
      tone: "error"

- key: "hub.storage.db_user"
  title: "Database user"
  default: postgres
  inline: true

- key: "hub.storage.db_password"
  title: "Database password"
  inline: true

- key: "hub.storage.external_db_host"
  title: "External Database Host"
  info: "Must be PostgreSQL 9.2 or above"
  inline: true

- key: "hub.storage.external_db_port"
  title: "External Database Port"
  default: "5432"
  validations:
    - type: presence
    - type: format
      check_against: "integer"
  inline: true

- key: "hub.storage.external_db_user"
  title: "External Database User"
  inline: true

- key: "hub.storage.external_db_password"
  title: "External Database Password"
  inline: true
