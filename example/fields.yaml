- key: "hub.storage.type"
  title: "Storage Type"
  info: "Where should the database be hosted?"
  type: select
  default: internal
  options:
    - key: internal
      value: "Internal - Keep the database in the cluster"
    - key: external
      value: "External - Connect to a database outside the cluster"
  validations:
    - type: equality
      check_against: 'external'
      message: "You will be responsible for managing your own database."
      tone: "warning"

- key: "hub.storage.managed_pvc"
  title: "Manage the in-cluster volume for me?"
  info: "Nectar can manage PersistentVolumeClaim automatically."
  type: select
  default: true
  options:
    - key: true
      value: "Yes - Nectar provisions the PVC"
    - key: false
      value: "No - You provision the PVC"
  validations:
    - type: equality
      check_against: 'false'
      message: "You will be asked to locate the PVC in the next step."
      tone: "warning"

- key: "hub.storage.pvc_name"
  title: "Point to the the PersistentVolumeClaim you want to use"
  type: select
  options_source:
    type: select-k8s-res
    res_match_rules:
      - kind: PersistentVolumeClaim
    make_key: name
    make_value: name
  validations: []

- key: "hub.storage.secrets.user"
  title: "Database user"
  default: postgres
  inline: true

- key: "hub.storage.secrets.password"
  title: "Database password"
  inline: true

- key: "hub.storage.external_db_host"
  title: "External Database Host"
  info: "Must be PostgreSQL 9.2 or above"
  inline: true

- key: "hub.storage.external_db_port"
  title: "External Database Port"
  default: "5432"
  validations:
    - type: presence
    - type: format
      check_against: "integer"
  inline: true

- key: "hub.storage.external_db_user"
  title: "External Database User"
  inline: true

- key: "hub.storage.external_db_password"
  title: "External Database Password"
  inline: true



#---------------------------BACKUPS-----------------------------



- key: "hub.backups.type"
  type: select
  options:
    - key: internal
      value: "Internal - save to an in-cluster database"
    - key: external
      value: "External - save to a database outside the cluster"
    - key: none
      value: "None - do not backup the database"
  validations:
    - type: equality
      check_against: none
      tone: warning
      message: "That is a terrible idea"




#---------------------------APPLICATION-----------------------------



- key: "hub.backend.secrets.key_base"
  title: "Session Crypto Key"
  info: "A 24 byte key to protect sessions from forgery attacks."
  inline: true

- key: "hub.backend.secrets.attr_enc_key"
  title: "Database Crypto Key"
  info: "A 32 byte key encrypt database tables."
  inline: true

- key: "hub.backend.encrypted_tables"
  title: Encrypted Tables
  type: checkboxes
  validations: []
  default:
    - people
  options:
    - key: people
      value: People (users, teams)
    - key: apps
      value: Content (apps, plans)
    - key: transactions
      value: Meta (purchases, installations, tickets)

- key: "hub.backend.num_users"
  title: "Expected daily active users"
  info: "How many staff will likely use Hub?"
  type: select
  options:
    - key: "low"
      value: "Fewer than 100 staff"
    - key: "medium"
      value: "Between 100 and 500 staff"
    - key: "high"
      value: "More than 500 staff"

- key: "hub.backend.response_time"
  title: "Required performance profile"
  info: "How many employees will likely use Hub?"
  type: select
  options:
    - key: "high"
      value: "Zero Latency"
    - key: "medium"
      value: "Up to 2 second page loads"
    - key: "low"
      value: "Up to 5 second page loads"










#---------------------------NETWORKING-----------------------------



- key: "hub.networking.strategy"
  title: "Kubernetes Networking Strategy"
  info: "How should we expose Hub to the internet?"
  type: select
  default: ingress
  options:
    - key: ingress
      value: "Use an ingress for the public web"
    - key: LoadBalancer
      value: "Create a LoadBalancer for the public web"
    - key: ClusterIP
      value: "Only create ClusterIP"
  validations:
    - type: equality
      check_against: ClusterIP
      tone: warning
      message: "Hub will not be on the world wide web"
  edu:
    - title: "Ingress Explained"
      value: "asd"

- key: "hub.networking.host"
  title: "Hub Domain Name"
  info: "The domain name Hub should be reachable on"
  default: "our-private-hub.codenectar.com"

- key: "hub.networking.path"
  title: "Hub Path"
  info: "The path Hub should be reachable on"
  default: "/"
